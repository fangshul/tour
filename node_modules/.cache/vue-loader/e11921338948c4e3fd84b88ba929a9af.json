{"remainingRequest":"D:\\tour\\phpfile\\html\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\tour\\phpfile\\html\\src\\views\\PushStrategy.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\tour\\phpfile\\html\\src\\views\\PushStrategy.vue","mtime":1586836284876},{"path":"D:\\tour\\phpfile\\html\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\tour\\phpfile\\html\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\tour\\phpfile\\html\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCglpbXBvcnQgTmF2IGZyb20gJy4uL2NvbXBvbmVudHMvTmF2LnZ1ZScKCWltcG9ydCBGb290IGZyb20gJy4uL2NvbXBvbmVudHMvRm9vdC52dWUnCglpbXBvcnQgeyBtYXZvbkVkaXRvciB9IGZyb20gJ21hdm9uLWVkaXRvcicKCWltcG9ydCAnbWF2b24tZWRpdG9yL2Rpc3QvY3NzL2luZGV4LmNzcycKCS8vIGltcG9ydCBtYXJrZWQgZnJvbSAnbWFya2VkJwoKCWV4cG9ydCBkZWZhdWx0IHsKCSAgbmFtZTogJ1B1c2hTdHJ0ZWd5JywKCSAgY29tcG9uZW50czogewoJICAgIE5hdiwKCSAgICBGb290LAoJICAgIG1hdm9uRWRpdG9yCgkgIH0sCgkgIGRhdGEgKCkgewoJICAJcmV0dXJuIHsKCSAgCQl0aXRsZTogJycsCgkgIAkJY29udGVudDogJycsCgkgIAkJaHRtbDogJycsCgkgIAkJbm90ZUluZm86ICcnLAoJICAJCWlmTm90ZTogZmFsc2UKCSAgCX0KCSAgfSwKCSAgbWV0aG9kczogewoJICAJcHVzaFN0cmEgKCkgewoJICAJCWNvbnNvbGUubG9nKHRoaXMuY29udGVudCkKCSAgCQl0aGlzLmlmTm90ZSA9IHRydWUKCQkJdGhpcy5ub3RlSW5mbyA9ICfmraPlnKjlj5HluIPor7fnqI3nrYknCgkJCXNldFRpbWVvdXQoKCk9PnsKCQkJCXRoaXMuaWZOb3RlID0gZmFsc2UKCQkJCS8vIHRoaXMuJHJvdXRlci5wdXNoKCcvc3RyYXRlZ3knKQoJCQl9LDEwMDApCgkgIAkJLy8gY29uc29sZS5sb2cobWFya2VkKHRoaXMuY29udGVudCkpCgkgIAkJdGhpcy4kaHR0cC5wb3N0KCdodHRwczovL3d5Lmx1amlhaGFvby5jbi90b3VyL21kLnBocCcsewoJCQkJImFjdGlvbiI6InN0cmF0ZWd5X3JlbGVhc2UiLAogICAgICAgICAgICAgICAgInN0cmF0ZWd5X3RpdGxlIjogdGhpcy50aXRsZSwKICAgICAgICAgICAgICAgICJzdHJhdGVneV9odG1sIjogdGhpcy5odG1sLAogICAgICAgICAgICAgICAgInN0cmF0ZWd5X21kIjogdGhpcy5jb250ZW50CgkJCX0se30pLnRoZW4ocmVzdWx0ID0+IHsKCQkJCWNvbnNvbGUubG9nKHJlc3VsdCkKCQkJCXRoaXMuaWZOb3RlID0gdHJ1ZQoJCQkJdGhpcy5ub3RlSW5mbyA9IHJlc3VsdC5ib2R5Lm1lc3NhZ2UKCQkJCXNldFRpbWVvdXQoKCk9PnsKCQkJCQl0aGlzLmlmTm90ZSA9IGZhbHNlCgkJCQkJdGhpcy4kcm91dGVyLnB1c2goJy9zdHJhdGVneScpCgkJCQl9LDEwMDApCgkJCQkvLyB0aGlzLiRyb3V0ZXIucHVzaCgnL3N0cmF0ZWd5JykKCQkJfSkKCSAgCX0sCgkgIAljaGFuZ2UgKHZhbHVlLCByZW5kZXIpIHsKCSAgCQljb25zb2xlLmxvZyhyZW5kZXIpCgkgIAkJdGhpcy5odG1sID0gcmVuZGVyCgkgIAl9LAoJICAJJGltZ0FkZCAocG9zLCRmaWxlKSB7CgkgIAkJdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICAgCWZvcm1kYXRhLmFwcGVuZCgnZWRpdG9ybWQtaW1hZ2UtZmlsZScsICRmaWxlKQogICAgICAgICAgIAl0aGlzLiRodHRwLnBvc3QoJ2h0dHBzOi8vd3kubHVqaWFoYW9vLmNuL3RvdXIvdXBsb2FkLnBocCcsZm9ybWRhdGEsewoJCQkJaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnIH0KCQkJfSkudGhlbihyZXN1bHQgPT4gewoJCQkJY29uc29sZS5sb2cocmVzdWx0KQoJCQkJIHRoaXMuJHJlZnMubWQuJGltZzJVcmwocG9zLCByZXN1bHQuYm9keS51cmwpCgkJCQkvLyB0aGlzLiRyb3V0ZXIucHVzaCgnL3N0cmF0ZWd5JykKCQkJfSkKCSAgCX0KCSAgfQoJfQo="},{"version":3,"sources":["PushStrategy.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PushStrategy.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<header class=\"pushStraHead\">\r\n\t\t\t<Nav :white=\"'white'\"></Nav>\r\n\t\t\t<!-- <div>\r\n\t\t\t\t<i class=\"iconfont icon-tianjiatupian\" @click=\"choiceImg\"></i>\r\n\t\t\t\t<div>设置攻略头图</div>\r\n\t\t\t\t<input type=\"file\" name=\"\" v-show=\"false\" ref=\"straImg\" @change=\"pushImg\">  \r\n\t\t\t</div> -->\r\n\t\t\t<input type=\"text\" name=\"\" placeholder=\"填写攻略标题\" v-model=\"title\">\r\n\t\t</header>\r\n\t\t<div class=\"pub-str-content\">\r\n\t\t\t<div class=\"pub-box\">\r\n\t\t\t\t<mavon-editor class=\"edit\" v-model=\"content\" @change=\"change\" @imgAdd=\"$imgAdd\" ref=\"md\"/>\r\n\t\t\t\t<div class=\"pub-str\" @click=\"pushStra\">发布攻略</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<Foot></Foot>\r\n\t\t<div class=\"noteInfo\" v-show=\"ifNote\">{{ noteInfo }}</div>\r\n\t</div>\r\n</template>\r\n\r\n<script type=\"text/javascript\">\r\n\timport Nav from '../components/Nav.vue'\r\n\timport Foot from '../components/Foot.vue'\r\n\timport { mavonEditor } from 'mavon-editor'\r\n\timport 'mavon-editor/dist/css/index.css'\r\n\t// import marked from 'marked'\r\n\r\n\texport default {\r\n\t  name: 'PushStrtegy',\r\n\t  components: {\r\n\t    Nav,\r\n\t    Foot,\r\n\t    mavonEditor\r\n\t  },\r\n\t  data () {\r\n\t  \treturn {\r\n\t  \t\ttitle: '',\r\n\t  \t\tcontent: '',\r\n\t  \t\thtml: '',\r\n\t  \t\tnoteInfo: '',\r\n\t  \t\tifNote: false\r\n\t  \t}\r\n\t  },\r\n\t  methods: {\r\n\t  \tpushStra () {\r\n\t  \t\tconsole.log(this.content)\r\n\t  \t\tthis.ifNote = true\r\n\t\t\tthis.noteInfo = '正在发布请稍等'\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tthis.ifNote = false\r\n\t\t\t\t// this.$router.push('/strategy')\r\n\t\t\t},1000)\r\n\t  \t\t// console.log(marked(this.content))\r\n\t  \t\tthis.$http.post('https://wy.lujiahaoo.cn/tour/md.php',{\r\n\t\t\t\t\"action\":\"strategy_release\",\r\n                \"strategy_title\": this.title,\r\n                \"strategy_html\": this.html,\r\n                \"strategy_md\": this.content\r\n\t\t\t},{}).then(result => {\r\n\t\t\t\tconsole.log(result)\r\n\t\t\t\tthis.ifNote = true\r\n\t\t\t\tthis.noteInfo = result.body.message\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.ifNote = false\r\n\t\t\t\t\tthis.$router.push('/strategy')\r\n\t\t\t\t},1000)\r\n\t\t\t\t// this.$router.push('/strategy')\r\n\t\t\t})\r\n\t  \t},\r\n\t  \tchange (value, render) {\r\n\t  \t\tconsole.log(render)\r\n\t  \t\tthis.html = render\r\n\t  \t},\r\n\t  \t$imgAdd (pos,$file) {\r\n\t  \t\tvar formdata = new FormData();\r\n           \tformdata.append('editormd-image-file', $file)\r\n           \tthis.$http.post('https://wy.lujiahaoo.cn/tour/upload.php',formdata,{\r\n\t\t\t\theaders: { 'Content-Type': 'multipart/form-data' }\r\n\t\t\t}).then(result => {\r\n\t\t\t\tconsole.log(result)\r\n\t\t\t\t this.$refs.md.$img2Url(pos, result.body.url)\r\n\t\t\t\t// this.$router.push('/strategy')\r\n\t\t\t})\r\n\t  \t}\r\n\t  }\r\n\t}\r\n</script>\r\n\r\n<style type=\"text/css\" >\r\n\t/*@import ''*/\r\n</style>\r\n<style type=\"text/css\" scoped>\r\n\t.pushStraHead{\r\n\t\theight: 288px;\r\n\t\tbackground-image: url(../../public/images/publish_strategy_bg.png);\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-size: 100% 100%;\r\n\t}\r\n\t/deep/ #nav a{\r\n\t\tcolor: #fff;\r\n\t}\r\n\t.pub-str{\r\n\t\twidth: 116px;\r\n\t\theight: 45px;\r\n\t\tbackground: #768bc8;\r\n\t\tcolor: #fff;\r\n\t\ttext-align: center;\r\n\t\tline-height: 45px;\r\n\t\tcursor: pointer;\r\n\t\tborder-radius: 5px;\r\n\t\tmargin: 0 auto;\r\n\t\tmargin-bottom: 40px;\r\n\t}\r\n\t.edit{\r\n\t\twidth: 1136px;\r\n\t\theight: 656px;\r\n\t\tmargin: 50px auto;\r\n\t\t/*margin-top: 50px;*/\r\n\t}\r\n\t.pushStraHead>input{\r\n\t\twidth: 850px;\r\n\t\theight: 45px;\r\n\t\tmargin: 0 auto;\r\n\t\tdisplay: block;\r\n\t\tpadding: 0 40px;\r\n\t\tfont-size: 18px;\r\n\t\tborder-radius: 3px;\r\n\t\tborder:none;\r\n\t}\r\n\t.pushStraHead>div>div{\r\n\t\tdisplay: inline-block;\r\n\t\tvertical-align: top;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 24px;\r\n\t\theight: 60px;\r\n\t\tline-height: 60px;\r\n\t}\r\n\t.icon-tianjiatupian{\r\n\t\tfont-size: 60px;\r\n\t\tcolor:#fff;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t.pushStraHead>div{\r\n\t\twidth: 266px;\r\n\t\tmargin: 0 auto;\r\n\t\tmargin-bottom: 35px;\r\n\t}\r\n\t.noteInfo{\r\n\t\tz-index: 10000;\r\n\t\twidth: 220px;\r\n\t}\r\n</style>"]}]}